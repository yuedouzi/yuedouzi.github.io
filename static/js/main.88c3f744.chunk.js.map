{"version":3,"sources":["loading.svg","components/tools/Env.jsx","components/Search.jsx","components/SideBar.jsx","components/tools/Markdown.jsx","components/List.jsx","components/LoginTokenContext.jsx","components/Header.jsx","components/tools/Class.jsx","components/Login.jsx","components/Footer.jsx","components/Page.jsx","components/tools/Clipboard.jsx","components/Edit.jsx","components/View.jsx","components/NotFound.jsx","components/Add.jsx","App.js","index.js"],"names":["module","exports","blogDataApi","Search","props","useState","value","setValue","fetchSearchData","s","a","fetch","result","json","handleSetSearch","className","onSubmit","e","preventDefault","htmlFor","name","onChange","target","placeholder","required","SideBar","Md","isloading","setIsloading","HtmlContent","mdString","marked","source","HtmlReactParser","useEffect","Prism","highlightAll","List","loading","blogList","setBlogList","page","setPage","lastPage","setLastPage","searchData","setSearchData","searchCount","setSearchCount","apiInfo","setApiInfo","fetchBlogList","useCallback","count","ok","history","push","githubPageName","message","fetchLastPageNumber","number","Math","ceil","SearchHTML","map","item","index","key","to","_id","subject","Date","timestamp","toLocaleString","src","alt","BlogListHTML","data","role","disabled","onClick","length","LoginTokenContext","createContext","LoginStatusContext","LoginTokenProvider","last_token","username","token","setToken","Provider","children","LoginStatusProvider","loginStatus","setLoginStatus","withRouter","useContext","useCookies","cookies","removeCookie","checkToken","method","body","JSON","stringify","headers","Headers","undefined","href","MainClass","Login","setCookie","password","loginData","setLoginData","handleEdit","fetchUserApi","info","path","goBack","handleSubmit","autoFocus","rows","type","Footer","Page","Clipboard","cursor","setCursor","textareaRef","useRef","clip","cursorPosition","navigator","clipboard","read","clipData","getType","blob","reader","FileReader","readAsDataURL","onload","base64data","getTime","imgName","blogData","valueLength","markdownText","slice","handleInsertImage","console","log","current","selectionStart","selectionEnd","id","ref","onKeyDown","ctrlKey","keyCode","handleKeyDown","Edit","now","image","setBlogData","editBlogDataApi","handleRefetch","base64str","View","slug","useParams","edit","setEdit","refetch","setRefetch","fetchBlogData","fetchDeleteBlogData","b","Content","handleDelete","NotFound","Add","uuid4","fetchBlogDataApi","App","CookiesProvider","exact","component","document","title","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.88c3f744.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loading.112ac8e0.svg\";","export const blogDataApi = \"https://www.oceanlee.cn:5001/api/blog/\"\nexport const searchApi = \"https://www.oceanlee.cn:5001/api/search?keyword=\"\nexport const tokenApi = 'https://www.oceanlee.cn:5001/api/check_token'\nexport const imgApi = 'https://www.oceanlee.cn:5001/api/img'\nexport const userApi = \"https://www.oceanlee.cn:5001/api/user\"\n\nexport const githubPageName = '/simple-blog'\n\n","import React, { useState } from \"react\"\nimport {searchApi} from './tools/Env'\n\nconst Search = (props) => {\n\n    const [value, setValue] = useState()\n    // const [resultData, setResultData] = useState()\n\n    const handleInput = (e) => {\n        setValue(e.target.value)\n    }\n\n    const fetchSearchData = async (s) => {\n        let result = await fetch(searchApi + s)\n        result = await result.json()\n        // 父组件Sidebar函数（来自List组件）\n        props.handleSetSearch(result)\n    }\n    const handleSubmit = (e) => {\n        fetchSearchData(value)\n        e.preventDefault()\n    }\n    return (\n        <>\n            <form className=\"form-group\" onSubmit={handleSubmit}>\n                <label htmlFor=\"search\" />\n                <input className=\"form-control\" name=\"search\" onChange={handleInput} placeholder=\"search...\" required />\n            </form>\n        </>\n    )\n}\n\nexport default Search","import React from \"react\"\nimport Search from \"./Search\"\n\nconst SideBar = (props) => {\n\nreturn (\n    <aside className=\"col-md-4 blog-sidebar\">\n        <div className=\"p-3 mb-3 bg-light rounded\">\n            <h4 className=\"font-italic\">About</h4>\n            {/* { token ? <span>token: {token}</span> : '' } */}\n            <p className=\"mb-0\">这是我的笔记本 <em>兴趣是学习进步的动力</em></p>\n        </div>\n\n        <div className=\"p-3\" >\n            {/* 传递父组件函数至Search组件 */}\n            <Search handleSetSearch={props.handleSetSearch} />\n        </div>\n\n        <div className=\"p-3\">\n            <h4 className=\"font-italic\">Tag</h4>\n            <ol className=\"list-unstyled\">\n                {/* <li><a href=\"#\">GitHub</a></li> */}\n            </ol>\n        </div>\n    </aside>\n)\n}\n\nexport default SideBar ","import React, { useEffect, useState } from \"react\"\nimport marked from \"marked\"\nimport HtmlReactParser from \"html-react-parser\"\nimport Prism from \"prismjs\"\nimport 'prismjs/themes/prism-okaidia.css'\n// import 'prismjs/components/prism-handlebars.min.js'\nimport 'prismjs/components/prism-json.min.js'\nimport 'prismjs/components/prism-jsx.min.js'\nimport 'prismjs/components/prism-python.min.js'\nimport 'prismjs/components/prism-bash.min.js'\n\nconst Md = (props) => {\n\n    const [isloading, setIsloading] = useState(true)\n\n    const HtmlContent = () => {\n        // source:父组件传递过来的markdown源代码\n        let mdString = marked(props.source)\n        mdString = HtmlReactParser(mdString)\n        return (\n            <>\n                {mdString}\n            </>\n        )\n    }\n\n    useEffect(() => {\n        if (props.source) {\n            setIsloading(false)\n        }\n    }, [props.source])\n\n    //注意此处，Prism不能和其他副作用函数放到一块，否则不起作用\n    useEffect(() => {\n        Prism.highlightAll()\n    })\n\n    return (\n        <>\n            {isloading ? '' :\n                <HtmlContent />\n            }\n        </>\n    )\n}\n\nexport default Md","import React, { useEffect, useState, useCallback } from \"react\"\nimport SideBar from './SideBar'\nimport { Link } from \"react-router-dom\"\nimport Md from \"./tools/Markdown\"\nimport { blogDataApi, githubPageName } from \"./tools/Env\"\nimport loading from \"../loading.svg\"\n\nconst List = (props) => {\n\n\n    const [blogList, setBlogList] = useState([{ loading: true }])\n    const [page, setPage] = useState(1)\n    const [lastPage, setLastPage] = useState(1)\n    const [searchData, setSearchData] = useState([])\n    const [searchCount, setSearchCount] = useState()\n    const [apiInfo, setApiInfo] = useState()\n\n    const fetchBlogList = useCallback(async (count) => {\n        if (count) {\n            try {\n                let result = await fetch(blogDataApi + 'last?page=' + count)\n                if (result.ok) {\n                    result = await result.json()\n                    if (result.count === 0) {\n                        // 空数据库（没有任何blog的时候）跳转到add页面以添加\n                        props.history.push(githubPageName + '/add')\n                    } else {\n                        setBlogList(result)\n                    }\n                }\n            } catch (err) {\n                setApiInfo(`API error(${err.message})`)\n            }\n        }\n        else {\n            fetchBlogList(1)\n        }\n    }, [props.history])\n\n    const handleNext = () => {\n        fetchBlogList(page + 1)\n        setPage(page + 1)\n    }\n    const handlePrevious = () => {\n        fetchBlogList(page - 1)\n        setPage(page - 1)\n    }\n    const fetchLastPageNumber = async () => {\n        let number = await fetch(blogDataApi + 'count')\n        number = await number.json()\n        setLastPage(Math.ceil(number.count / 10))\n    }\n\n    // set search函数，传递给子组件Sidebar\n    const handleSetSearch = (s) => {\n        setSearchData(s)\n        setSearchCount(s.length)\n        // List数据隐藏\n        setBlogList({ loading: true })\n    }\n    useEffect(() => {\n        page === 1 ? fetchBlogList() : fetchBlogList(page)\n    }, [page, fetchBlogList])\n\n    useEffect(() => {\n        fetchLastPageNumber()\n    })\n\n    const SearchHTML = () => {\n        return (\n            <>\n                {searchCount === 0 ? <h6>Not Found</h6> : \"\"}\n                {searchData.map((item, index) => {\n                    return (\n                        <div className=\"blog-post\" key={index}>\n                            <h2 className=\"blog-post-title\" ><Link to={githubPageName + item._id}>{item.subject}</Link></h2>\n                            <p className=\"blog-post-meta\">\n                                {/* 此处将item中的时间戳转化为可读模式 */}\n                                {item ? new Date(item.timestamp).toLocaleString() : <img src={loading} alt={loading} />}\n                            </p>\n                        </div>)\n                })\n                }\n            </>\n        )\n    }\n\n    const BlogListHTML = () => {\n        return (\n            <>\n                {blogList.map((item, index) => {\n                    return (\n                        <div className=\"blog-post\" key={index} >\n                            <h2 className=\"blog-post-title\" ><Link to={githubPageName + '/' + item._id}>{item.subject}</Link></h2>\n                            <p className=\"blog-post-meta\">\n                                {/* 此处将item中的时间戳转化为可读模式 */}\n                                {item.timestamp ? new Date(item.timestamp).toLocaleString() : <img src={loading} alt={loading} />}\n                            </p>\n                            <Md source={item.data} />\n                        </div>\n                    )\n                })}\n            </>\n        )\n    }\n    return (\n        <>\n            <main role=\"main\" className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-md-8 blog-main\">\n                        {/* 搜索数据列表 */}\n                        {searchData ?\n                            <SearchHTML />\n                            : <></>}\n                        <>\n                            {/* api获取信息提示 */}\n                            {apiInfo ? <h6 className=\"text-danger\">{apiInfo}</h6> :\n                                <>\n                                    {/* blog列表载入（防止在api数据未获取前渲染空html） */}\n                                    {blogList.loading ?\n                                        <></>\n                                        :\n                                        <>\n                                            <BlogListHTML />\n                                            <div className=\"blog-pagination\">\n                                                <button className=\"btn btn-outline-primary\" disabled={page === 1 ? 'disabled' : ''} onClick={handlePrevious}>Previous</button>\n                                                <button className=\"btn btn-outline-secondary\" disabled={page === lastPage ? 'disabled' : ''} onClick={handleNext}>Next</button>\n                                            </div>\n                                        </>\n                                    }\n                                </>\n                            }\n                        </>\n                    </div>\n                    <SideBar handleSetSearch={handleSetSearch} />\n                </div>\n            </main>\n        </>\n    )\n}\n\nexport default List","import React, { useState, createContext } from \"react\"\n\nexport const LoginTokenContext = createContext()\nexport const LoginStatusContext = createContext()\n\nexport const LoginTokenProvider = (props) => {\n    const [token, setToken] = useState({\n        last_token: '',\n        username: ''\n    })\n    return (\n        <LoginTokenContext.Provider value={[token, setToken]}>\n            {props.children}\n        </LoginTokenContext.Provider>\n    )\n}\n\nexport const LoginStatusProvider = (props) => {\n    const [loginStatus, setLoginStatus] = useState(false)\n    return (\n        <LoginStatusContext.Provider value={[loginStatus, setLoginStatus]}>\n            {props.children}\n        </LoginStatusContext.Provider>\n    )\n}","import React, { useContext, useEffect, useCallback, useState } from \"react\"\nimport { Link, withRouter } from \"react-router-dom\"\nimport { LoginStatusContext } from \"./LoginTokenContext\"\nimport { useCookies } from \"react-cookie\"\nimport { tokenApi, githubPageName } from './tools/Env'\n\nconst Header = (props) => {\n    // Header包含了一个check_token的函数，用来检测token是否有效\n\n    const [loginStatus, setLoginStatus] = useContext(LoginStatusContext)\n    const [cookies, removeCookie] = useCookies('token')\n    const [apiInfo, setApiInfo] = useState()\n\n    const handleLogout = () => {\n        removeCookie('token')\n        setLoginStatus(false)\n        props.history.push(githubPageName+'/login')\n    }\n\n    const checkToken = useCallback(async () => {\n        // api post数据并返回erorr\n        try {\n            let result = await fetch(tokenApi, {\n                method: 'POST',\n                body: JSON.stringify(cookies),\n                headers: new Headers({\n                    'Content-Type': 'application/json'\n                })\n            })\n            if (result.ok) {\n                result = await result.json()\n                // console.log('Debug: Header-', result)\n                setLoginStatus(true)\n            } else {\n                setLoginStatus(false)\n                setApiInfo(`token has expired`)\n            }\n        } catch (err) {\n            setApiInfo(`API error(${err.message})`)\n        }\n    }, [cookies, setLoginStatus])\n\n\n    useEffect(() => {\n        if (cookies.token === undefined) {\n            setLoginStatus(false)\n        } else {\n            checkToken()\n        }\n    }, [cookies.token, checkToken, setLoginStatus])\n\n    return (\n        <div className=\"container\">\n            <header className=\"blog-header py-3\">\n                <div className=\"row flex-nowrap justify-content-between align-items-center\">\n                    <div className=\"col-4 text-left\">\n                        {/* 此处暂时不要用Link的形式来跳转 */}\n                        <a href={githubPageName} className=\"blog-header-logo text-dark\" >Simple notebook</a>\n                    </div>\n                    <div className=\"col-4 d-flex justify-content-end align-items-center\">\n                        {loginStatus ?\n                            <>\n                                <Link className=\"btn btn-sm text-primary\" to={githubPageName + '/add'} >Add</Link>\n                                <button className=\"btn btn-sm btn-outline-secondary\" onClick={handleLogout} >Logout</button>\n                            </>\n                            :\n                            <>\n                                {apiInfo ? <span className=\"mr-4 text-danger\">{apiInfo}</span> : ''}\n                                <Link className=\"btn btn-sm btn-outline-secondary\" to={githubPageName + '/login'} >Login</Link>\n                            </>\n                        }\n                    </div>\n                </div>\n            </header>\n            <div className=\"nav-scroller py-1 mb-2\">\n                <nav className=\"nav d-flex justify-content-between\">\n                    <Link className=\"p-2 text-muted\" to={githubPageName}>Home</Link>\n                    <Link className=\"p-2 text-muted\" to={githubPageName + '/page'} > Page</Link>\n                </nav>\n            </div>\n        </div>\n    )\n}\n\nexport default withRouter(Header)","import React from 'react'\n\nexport const MainClass = (props) => {\n    return (\n        <main role=\"main\" className=\"container\">\n            <div className=\"row\">\n                <div className=\"col blog-main\">\n                    <div className=\"blog-post\">\n                        {props.children}\n                    </div>\n                </div>\n            </div>\n        </main>\n    )\n}\n\nexport const Alert = (props) => {\n    return (\n        <div class=\"alert alert-success\">\n            <strong>{props.children}</strong>\n        </div>\n    )\n}\n","import React, { useState, useContext, useEffect } from \"react\"\nimport { useCookies } from \"react-cookie\"\nimport { LoginTokenContext, LoginStatusContext } from \"./LoginTokenContext\"\nimport { MainClass } from './tools/Class'\nimport { userApi, githubPageName } from './tools/Env'\n\nconst Login = (props) => {\n    const [token, setToken] = useContext(LoginTokenContext)\n    const [loginStatus, setLoginStatus] = useContext(LoginStatusContext)\n    const [cookies, setCookie] = useCookies('token')\n\n\n    const [loginData, setLoginData] = useState({\n        username: '',\n        password: ''\n    })\n\n    // 登录错误信息state,此处不能设置为对象，因为fetch error会setState为字符串\n    const [apiInfo, setApiInfo] = useState()\n\n    useEffect(() => {\n        if (loginStatus) {\n            props.history.push(githubPageName)\n        }\n    }, [loginStatus, props.history])\n\n    const handleEdit = (e) => {\n        setLoginData({\n            ...loginData,\n            [e.target.name]: e.target.value\n        })\n    }\n\n    const fetchUserApi = async () => {\n        try {\n            let result = await fetch(userApi, {\n                method: 'POST',\n                body: JSON.stringify(loginData),\n                headers: new Headers({\n                    'Content-Type': 'application/json'\n                })\n            })\n            // result = Response响应对象\n            if (result.ok) {\n                result = await result.json()\n                setApiInfo(result.info)\n                setToken({\n                    token: result.token,\n                    username: result.username\n                })\n                // 保存token到cookie\n                setCookie('token', result.token, { path: '/' })\n                setLoginStatus(true)\n                // 等待setLoginStatus结束后才进行goBack操作，否则会出现挂载未结束告警\n                if (loginStatus) {\n                    props.history.goBack()\n                }\n            } else {\n                result = await result.json()\n                setApiInfo(result.info)\n                props.history.push(githubPageName + '/login')\n            }\n        } catch (err) {\n            setApiInfo(`API error(${err.message})`)\n        }\n\n    }\n    const handleSubmit = (e) => {\n        // 此处必须要分离出async异步函数，不能把该handle定义为异步函数\n        fetchUserApi()\n        e.preventDefault()\n    }\n\n    return (\n        <>\n            <MainClass>\n                <form className=\"form-signin\" onSubmit={(e) => handleSubmit(e)}>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"username\" />\n                        <input className=\"form-control\" name=\"username\" value={loginData.username} onChange={(e) => handleEdit(e)} placeholder=\"用户名\" autoFocus required />\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"password\" />\n                        <input rows=\"10\" className=\"form-control\" name=\"password\" value={loginData.password} onChange={(e) => handleEdit(e)} placeholder=\"密码\" autoFocus required />\n                    </div>\n                    <button type=\"submit\" className=\"btn btn-primary\" >Submit\n                    </button>\n                    {apiInfo ? <span className=\"ml-4 text-danger\">{apiInfo}</span> : ''}\n                </form>\n            </MainClass>\n        </>\n    )\n}\n\nexport default Login","import React from \"react\"\n\nconst Footer = () => {\n    return (\n        <footer className=\"blog-footer\">\n            <p>notebook by react and bootstrap4</p>\n        </footer>\n    )\n}\n\nexport default Footer ","import React from 'react'\nimport {MainClass} from \"./tools/Class\"\n\nexport default function Page() {\n    return (\n        <MainClass>Page</MainClass>\n    )\n}\n","import React from \"react\"\nimport { imgApi } from \"./Env\"\nimport { useEffect, useRef, useState } from \"react\"\nconst Clipboard = (props) => {\n\n\n    const [cursor, setCursor] = useState(0)\n    const textareaRef = useRef()\n    // value为e.target.value数据，cursorPostion为当前光标位置，在光标位置插入剪切板数据\n    const clip = async (value, cursorPosition) => {\n        let clipData = await navigator.clipboard.read()\n        clipData = await clipData\n        try {\n            const blob = await clipData[0].getType(\"image/png\")\n            const reader = new FileReader()\n            reader.readAsDataURL(blob)\n            reader.onload = () => {\n                let base64data = reader.result\n                const timestamp = new Date().getTime()\n                const imgName = `${props.blogData._id}--${timestamp}`\n                let valueLength = value.length\n                // 此处注意不要用+'\\n'的方式（https://eslint.org/docs/rules/no-useless-concat）\n                let markdownText = `![${imgName}](${imgApi}/${imgName})\\n`\n                let data = value.slice(0, cursorPosition) + markdownText + value.slice(cursorPosition, valueLength)\n                props.handleInsertImage(data, imgName, base64data)\n                setCursor(cursorPosition + markdownText.length)\n            }\n        } catch (err) {\n            console.log('No images were found in the clipboard')\n        }\n    }\n\n    useEffect(() => {\n        //  处理光标位置，markdown字符串后\n        textareaRef.current.selectionStart = textareaRef.current.selectionEnd = cursor\n    }, [cursor])\n\n    const handleKeyDown = (e) => {\n        if (e.ctrlKey) {\n            if (e.keyCode === 86) {\n                let value = e.target.value\n                let cursorPosition = e.target.selectionStart\n                clip(value, cursorPosition)\n            }\n        }\n    }\n\n\n    return (\n        <div className=\"form-group\">\n            <label htmlFor=\"data\" />\n            <textarea id='text' rows=\"10\" ref={textareaRef} className=\"form-control\" onKeyDown={(e) => handleKeyDown(e)} name=\"data\" value={props.blogData.data} onChange={(e) => props.handleEdit(e)} placeholder=\"内容(支持markdown)\" required />\n        </div>\n    )\n}\n\nexport default Clipboard","import React, { useState } from \"react\"\nimport { useCookies } from \"react-cookie\"\nimport { blogDataApi  } from \"./tools/Env\"\nimport  Clipboard  from './tools/Clipboard'\n\nconst Edit = (props) => {\n\n    const [cookies, removeCookie] = useCookies('token')\n    const [apiInfo, setApiInfo] = useState()\n    const [blogData, setBlogData] = useState({\n        _id: props._id,\n        subject: props.subject,\n        timestamp: Date.now(),\n        data: props.data,\n        image: props.image,\n        token: cookies.token\n    })\n\n    const handleEdit = (e) => {\n        setBlogData({\n            ...blogData,\n            [e.target.name]: e.target.value\n        })\n    }\n\n\n    // Clipboard组件将处理后的value(包含图像链接markdown代码) imgData 插入到文本框中\n    const handleInsertImage = (value, imgName, base64str) => {\n        setBlogData({\n            ...blogData,\n            data: value,\n            image: {\n                ...blogData.image,\n                [imgName]: base64str\n            }\n        })\n    }\n\n    const editBlogDataApi = async () => {\n        try {\n            let result = await fetch(blogDataApi + 'update', {\n                method: 'POST',\n                body: JSON.stringify(blogData),\n                headers: new Headers({\n                    'Content-Type': 'application/json'\n                })\n            })\n            if (result.ok) {\n                props.handleEdit(false)\n                props.handleRefetch()\n            }\n        } catch (err) {\n            setApiInfo(`API error(${err.message})`)\n        }\n    }\n\n\n    const handleSubmit = (e) => {\n        editBlogDataApi()\n        e.preventDefault()\n    }\n    return (\n        <form onSubmit={(e) => handleSubmit(e)}>\n            <div className=\"form-row\">\n                <div className=\"col-7\">\n                    <label htmlFor=\"subject\" />\n                    <input className=\"form-control\" name=\"subject\" value={blogData.subject} onChange={(e) => handleEdit(e)} required />\n                </div>\n            </div>\n            <div className=\"form-group\">\n                <label htmlFor=\"data\" />\n                <Clipboard blogData={blogData} handleEdit={handleEdit} handleInsertImage={handleInsertImage} />\n            </div>\n            <button type=\"submit\" className=\"btn btn-primary\" >Submit</button>\n            <button className=\"btn btn-sm\" type=\"button\" onClick={() => props.handleEdit(false)}>Cancel</button> {/* 注意此处的type为button，否则会和form冲突 */}\n            {apiInfo ? <span className=\"ml-4 text-danger\">{apiInfo}</span> : ''}\n        </form>\n    )\n}\n\nexport default Edit\n","import React, { useState, useEffect, useContext, useCallback } from 'react'\nimport Edit from \"./Edit\"\nimport { MainClass } from \"./tools/Class\"\nimport { useParams } from \"react-router-dom\"\nimport Md from \"./tools/Markdown\"\nimport { useCookies } from \"react-cookie\"\nimport { LoginStatusContext } from \"./LoginTokenContext\"\nimport { blogDataApi, githubPageName } from \"./tools/Env\"\n\n// /blog\nconst View = (props) => {\n\n    const [cookies, removeCookie] = useCookies('token')\n    const [loginStatus, setLoginStatus] = useContext(LoginStatusContext)\n    let { slug } = useParams()\n\n    const [blogData, setBlogData] = useState({ loading: true })\n    const [edit, setEdit] = useState(false)\n    // 用来更新父组件refetch，以便useEffect重新渲染\n    const [refetch, setRefetch] = useState(false)\n    const [apiInfo, setApiInfo] = useState()\n\n    const fetchBlogData = useCallback(async (id) => {\n        try {\n            let result = await fetch(blogDataApi + id)\n            if (result.ok) {\n                result = await result.json()\n                setBlogData(result)\n            } else {\n                props.history.push(githubPageName + '/404')\n            }\n        } catch (err) {\n            setApiInfo(`API err(${err.message})`)\n        }\n    }, [props.history])\n\n    const fetchDeleteBlogData = async () => {\n        await fetch(blogDataApi + 'del', {\n            method: 'POST',\n            body: JSON.stringify({\n                _id: blogData._id,\n                token: cookies.token\n            }),\n            headers: new Headers({\n                'Content-Type': 'application/json'\n            })\n        })\n    }\n\n    const handleDelete = (e) => {\n        fetchDeleteBlogData()\n        e.preventDefault()\n        props.history.push(githubPageName)\n    }\n\n    const handleEdit = (b) => {\n        setEdit(b)\n    }\n\n    const handleRefetch = () => {\n        setRefetch(true)\n    }\n\n    useEffect(() => {\n        if (refetch) {\n            // 改回原始state，以便下次重新刷新\n            setRefetch(false)\n            fetchBlogData(slug)\n        }\n    }, [fetchBlogData, refetch, slug])\n\n    useEffect(() => {\n        fetchBlogData(slug)\n    }, [fetchBlogData, slug])\n\n    const Content = () => {\n        return (\n            <>\n                <MainClass>\n                    {blogData.loading ? '' :\n                        <>\n                            {\n                                edit ?\n                                    <Edit _id={blogData._id\n                                    } timestamp={blogData.timestamp} subject={blogData.subject} data={blogData.data} image={blogData.image} handleEdit={handleEdit} handleRefetch={handleRefetch} fetchBlogData={fetchBlogData} />\n                                    :\n                                    <>\n                                        <h2 className=\"blog-post-title\" >{blogData.subject}</h2>\n                                        <p className=\"blog-post-meta\">\n                                            {new Date(blogData.timestamp).toLocaleString()}\n                                            {loginStatus ?\n                                                <>\n                                                    <span><button className=\"btn btn-primary btn-sm\" onClick={() => handleEdit(true)}>编辑</button></span>\n                                                    <span><button className=\"btn btn-sm text-danger\" onClick={(e) => handleDelete(e)}>删除</button></span>\n                                                </>\n                                                : ''\n                                            }\n                                        </p>\n                                        <Md source={blogData.data} />\n                                    </>}\n                        </>\n                    }\n                </MainClass>\n            </>\n        )\n    }\n\n    return (\n        <>\n            {apiInfo ?\n                <MainClass><div className=\"text-danger\">{apiInfo}</div></MainClass>\n                :\n                <Content />\n            }\n        </>\n    )\n}\n\nexport default View \n","import React from 'react'\nimport { MainClass } from './tools/Class'\n\nconst NotFound = () => {\n    return (\n        <>\n            <MainClass>\n                <h1>Not Found</h1>\n            </MainClass>\n        </>\n    )\n}\n\nexport default NotFound","import React, { useState, useContext } from \"react\"\nimport { MainClass } from \"./tools/Class\"\nimport NotFound from \"./NotFound\"\nimport { v4 as uuid4 } from 'uuid'\nimport { useCookies } from \"react-cookie\"\nimport { LoginStatusContext } from \"./LoginTokenContext\"\nimport { blogDataApi, githubPageName } from \"./tools/Env\"\nimport Clipboard from \"./tools/Clipboard\"\n\nconst Add = (props) => {\n\n    const [loginStatus, setLoginStatus] = useContext(LoginStatusContext)\n    const [cookies, removeCookie] = useCookies('token')\n    const _id = uuid4()\n\n    const [blogData, setBlogData] = useState({\n        _id: _id,\n        subject: '',\n        timestamp: Date.now(),\n        data: '',\n        image: {},\n        token: cookies.token\n    })\n\n    const [apiInfo, setApiInfo] = useState()\n\n    const handleEdit = (e) => {\n        setBlogData({\n            ...blogData,\n            [e.target.name]: e.target.value\n        })\n    }\n    // Clipboard组件将imgData markdown代码插入到文本框中\n    const handleInsertImage = (value, imgName, base64str) => {\n        setBlogData({\n            ...blogData,\n            data: value,\n            image: {\n                ...blogData.image,\n                [imgName]: base64str\n            }\n        })\n    }\n\n    const fetchBlogDataApi = async () => {\n        try {\n            let result = await fetch(blogDataApi + 'add', {\n                method: 'POST',\n                body: JSON.stringify(blogData),\n                headers: new Headers({\n                    'Content-Type': 'application/json'\n                })\n            })\n            if (result.ok) {\n                result = await result.json()\n                props.history.push(githubPageName + '/' + blogData._id)\n            }\n        } catch (err) {\n            setApiInfo(`API err(${err.message})`)\n        }\n    }\n\n    const handleSubmit = (e) => {\n        fetchBlogDataApi()\n        e.preventDefault()\n    }\n\n    return (\n        <>\n            {loginStatus ?\n                <>\n                    <MainClass>\n                        <form onSubmit={handleSubmit}>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"subject\" />\n                                <input className=\"form-control\" name=\"subject\" value={blogData.subject} onChange={(e) => handleEdit(e)} placeholder=\"标题\" required />\n                            </div>\n                            <Clipboard blogData={blogData} handleEdit={handleEdit} handleInsertImage={handleInsertImage} />\n                            <button type=\"submit\" className=\"btn btn-primary\" >Submit</button>\n                            <button className=\"btn btn-sm\" >Cancel</button>\n                            {apiInfo ? <span className=\"ml-4 text-danger\">{apiInfo}</span> : ''}\n                        </form>\n                    </MainClass>\n                </>\n                :\n                <NotFound />\n            }\n        </>\n    )\n}\n\nexport default Add ","import React from 'react';\nimport '../node_modules/bootstrap/dist/css/bootstrap.css'\nimport './blog.css'\nimport List from \"./components/List\"\nimport Header from \"./components/Header\"\nimport Login from \"./components/Login\"\nimport Footer from \"./components/Footer\"\nimport Page from \"./components/Page\"\nimport View from './components/View'\nimport Add from './components/Add'\nimport { Route, BrowserRouter as Router, Switch } from \"react-router-dom\"\nimport { LoginTokenProvider, LoginStatusProvider } from \"./components/LoginTokenContext\"\nimport { CookiesProvider } from \"react-cookie\"\nimport NotFound from './components/NotFound';\nimport { githubPageName } from './components/tools/Env'\n\nconst App = () => {\n\n  return (\n    <CookiesProvider>\n      <Router>\n        <LoginTokenProvider>\n          <LoginStatusProvider>\n            <Header />\n            <Switch>\n              <Route exact path={githubPageName + '/page'} component={Page} />\n              <Route exact path={githubPageName + '/add'} component={Add} />\n              <Route exact path={githubPageName} component={List} />\n              <Route exact path={githubPageName + '/login'} component={Login} />\n              <Route exact path={githubPageName + '/404'} component={NotFound} />\n              {/* 此处注意排序 */}\n              <Route exact path={githubPageName + '/:slug'} component={View} />\n            </Switch>\n            <Footer />\n          </LoginStatusProvider>\n        </LoginTokenProvider>\n      </Router>\n    </CookiesProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\ndocument.title = 'Simple notebook'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}